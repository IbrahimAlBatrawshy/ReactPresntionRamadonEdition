/* Ramadan Ending Animation Styles */

.ramadan-ending-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: linear-gradient(180deg, #0a0a1a 0%, #1a1a3a 30%, #0c1445 100%);
  z-index: 9999;
  overflow: hidden;
  animation: fadeInOverlay 1s ease-out;
}

@keyframes fadeInOverlay {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* Night Sky */
.night-sky {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
}

.star {
  position: absolute;
  background: white;
  border-radius: 50%;
  animation: twinkle 2s ease-in-out infinite;
}

@keyframes twinkle {
  0%, 100% { opacity: 0.3; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.2); }
}

/* Crescent Moon */
.crescent-moon {
  position: absolute;
  top: 8%;
  right: 15%;
  opacity: 0;
  transform: translateY(-50px) scale(0.5);
  transition: all 1.5s cubic-bezier(0.4, 0, 0.2, 1);
}

.crescent-moon.visible {
  opacity: 1;
  transform: translateY(0) scale(1);
}

.moon-shape {
  font-size: 150px;
  color: #ffd700;
  text-shadow: 
    0 0 30px rgba(255, 215, 0, 0.8),
    0 0 60px rgba(255, 215, 0, 0.5),
    0 0 100px rgba(255, 215, 0, 0.3);
  animation: moonPulse 3s ease-in-out infinite;
}

@keyframes moonPulse {
  0%, 100% { filter: brightness(1); }
  50% { filter: brightness(1.2); }
}

.moon-glow {
  position: absolute;
  width: 300px;
  height: 300px;
  background: radial-gradient(circle, rgba(255, 215, 0, 0.3) 0%, transparent 70%);
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  animation: glowPulse 4s ease-in-out infinite;
}

@keyframes glowPulse {
  0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; }
  50% { transform: translate(-50%, -50%) scale(1.3); opacity: 0.8; }
}

/* Islamic Patterns */
.islamic-patterns {
  position: absolute;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.pattern-left, .pattern-right {
  position: absolute;
  width: 200px;
  height: 100%;
  background: 
    repeating-linear-gradient(
      45deg,
      transparent,
      transparent 10px,
      rgba(218, 165, 32, 0.1) 10px,
      rgba(218, 165, 32, 0.1) 20px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 10px,
      rgba(218, 165, 32, 0.1) 10px,
      rgba(218, 165, 32, 0.1) 20px
    );
  opacity: 0.5;
}

.pattern-left {
  left: 0;
  background: linear-gradient(90deg, rgba(218, 165, 32, 0.2) 0%, transparent 100%);
}

.pattern-right {
  right: 0;
  background: linear-gradient(-90deg, rgba(218, 165, 32, 0.2) 0%, transparent 100%);
}

.pattern-bottom {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 100px;
  background: 
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath fill='none' stroke='%23daa520' stroke-width='0.5' d='M0,50 Q25,0 50,50 T100,50' opacity='0.3'/%3E%3C/svg%3E") repeat-x;
  background-size: 100px 50px;
  opacity: 0.4;
}

/* Lanterns */
.lanterns-container {
  position: absolute;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.lantern {
  position: absolute;
  animation: lanternSwing 4s ease-in-out infinite;
  transform-origin: top center;
}

@keyframes lanternSwing {
  0%, 100% { transform: rotate(-3deg); }
  50% { transform: rotate(3deg); }
}

.lantern-top {
  width: 20px;
  height: 8px;
  background: #8b4513;
  border-radius: 3px 3px 0 0;
  margin: 0 auto;
  position: relative;
}

.lantern-top::before {
  content: '';
  position: absolute;
  top: -15px;
  left: 50%;
  transform: translateX(-50%);
  width: 2px;
  height: 15px;
  background: #8b4513;
}

.lantern-body {
  width: 40px;
  height: 60px;
  background: linear-gradient(180deg, rgba(255, 200, 100, 0.9) 0%, rgba(255, 150, 50, 0.9) 100%);
  border-radius: 5px;
  margin: 0 auto;
  position: relative;
  box-shadow: 
    0 0 20px rgba(255, 200, 100, 0.8),
    0 0 40px rgba(255, 150, 50, 0.5),
    inset 0 0 15px rgba(255, 255, 200, 0.3);
  overflow: hidden;
}

.lantern-light {
  position: absolute;
  width: 100%;
  height: 100%;
  background: radial-gradient(ellipse at center, rgba(255, 255, 200, 0.8) 0%, transparent 70%);
  animation: lanternFlicker 0.5s ease-in-out infinite alternate;
}

@keyframes lanternFlicker {
  0% { opacity: 0.8; }
  100% { opacity: 1; }
}

.lantern-pattern {
  position: absolute;
  width: 100%;
  height: 100%;
  background: 
    repeating-linear-gradient(
      0deg,
      transparent,
      transparent 8px,
      rgba(139, 69, 19, 0.3) 8px,
      rgba(139, 69, 19, 0.3) 10px
    ),
    repeating-linear-gradient(
      90deg,
      transparent,
      transparent 8px,
      rgba(139, 69, 19, 0.3) 8px,
      rgba(139, 69, 19, 0.3) 10px
    );
}

.lantern-bottom {
  width: 25px;
  height: 15px;
  background: #8b4513;
  border-radius: 0 0 50% 50%;
  margin: 0 auto;
  position: relative;
}

.lantern-bottom::after {
  content: '';
  position: absolute;
  bottom: -10px;
  left: 50%;
  transform: translateX(-50%);
  width: 8px;
  height: 10px;
  background: #654321;
  border-radius: 0 0 50% 50%;
}

/* Cannon */
.cannon-container {
  position: absolute;
  bottom: 15%;
  left: 10%;
  opacity: 0;
  transform: translateX(-100px);
  transition: all 1s cubic-bezier(0.4, 0, 0.2, 1);
}

.cannon-container.visible {
  opacity: 1;
  transform: translateX(0);
}

.cannon {
  position: relative;
  transform-origin: center bottom;
}

.cannon.fired {
  animation: cannonRecoil 0.3s ease-out;
}

@keyframes cannonRecoil {
  0% { transform: translateX(0) rotate(0); }
  30% { transform: translateX(-20px) rotate(-5deg); }
  100% { transform: translateX(0) rotate(0); }
}

.cannon-base {
  width: 80px;
  height: 40px;
  background: linear-gradient(180deg, #4a3728 0%, #2d1f14 100%);
  border-radius: 5px;
  position: relative;
}

.cannon-wheel {
  position: absolute;
  width: 50px;
  height: 50px;
  background: radial-gradient(circle, #5a4738 0%, #2d1f14 100%);
  border-radius: 50%;
  border: 4px solid #1a1108;
  bottom: -25px;
}

.cannon-wheel.left { left: -10px; }
.cannon-wheel.right { right: -10px; }

.cannon-wheel::before {
  content: '';
  position: absolute;
  width: 15px;
  height: 15px;
  background: #1a1108;
  border-radius: 50%;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.cannon-barrel {
  position: absolute;
  width: 120px;
  height: 35px;
  background: linear-gradient(180deg, #3d3d3d 0%, #1a1a1a 50%, #3d3d3d 100%);
  border-radius: 5px 20px 20px 5px;
  top: -30px;
  left: 20px;
  transform: rotate(-25deg);
  transform-origin: left center;
  box-shadow: 
    inset 0 5px 10px rgba(255, 255, 255, 0.1),
    0 5px 15px rgba(0, 0, 0, 0.5);
}

.cannon-opening {
  position: absolute;
  width: 25px;
  height: 25px;
  background: radial-gradient(circle, #0a0a0a 0%, #1a1a1a 100%);
  border-radius: 50%;
  right: 5px;
  top: 50%;
  transform: translateY(-50%);
  border: 3px solid #2a2a2a;
}

.cannon-smoke {
  position: absolute;
  width: 100px;
  height: 100px;
  top: -80px;
  left: 100px;
  background: radial-gradient(circle, rgba(200, 200, 200, 0.8) 0%, transparent 70%);
  border-radius: 50%;
  animation: smokeRise 2s ease-out forwards;
}

@keyframes smokeRise {
  0% { 
    transform: scale(0.5) translateY(0); 
    opacity: 0.8;
  }
  100% { 
    transform: scale(3) translateY(-100px); 
    opacity: 0;
  }
}

.cannon-flash {
  position: absolute;
  width: 80px;
  height: 80px;
  top: -60px;
  left: 80px;
  background: radial-gradient(circle, rgba(255, 200, 100, 1) 0%, rgba(255, 150, 50, 0.5) 50%, transparent 70%);
  border-radius: 50%;
  animation: flashBurst 0.3s ease-out forwards;
}

@keyframes flashBurst {
  0% { transform: scale(0); opacity: 1; }
  100% { transform: scale(2); opacity: 0; }
}

/* Boom Image - Bottom Left */
.boom-container {
  position: absolute;
  bottom: 5%;
  left: 5%;
  z-index: 50;
  opacity: 0;
  transform: scale(0) rotate(-20deg);
  transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.boom-container.visible {
  opacity: 1;
  transform: scale(1) rotate(0deg);
  animation: boomShake 0.5s ease-out, finaleCannonRecoil 8s ease-in-out 0.5s infinite;
}

.boom-image {
  width: 250px;
  height: auto;
  filter: drop-shadow(0 10px 30px rgba(255, 150, 0, 0.6)) drop-shadow(0 0 20px rgba(255, 200, 0, 0.4));
  animation: boomGlow 2s ease-in-out infinite;
}

@keyframes finaleCannonRecoil {
  0%, 11%, 26%, 41%, 56%, 71%, 86%, 100% { transform: rotate(0deg); }
  12%, 27%, 42%, 57%, 72%, 87% { transform: rotate(-12deg) translateX(-8px); }
  14%, 29%, 44%, 59%, 74%, 89% { transform: rotate(0deg); }
}

@keyframes boomShake {
  0%, 100% { transform: rotate(0deg); }
  20% { transform: rotate(-10deg); }
  40% { transform: rotate(10deg); }
  60% { transform: rotate(-5deg); }
  80% { transform: rotate(5deg); }
}

@keyframes boomFloat {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

@keyframes boomGlow {
  0%, 100% { filter: drop-shadow(0 10px 30px rgba(255, 150, 0, 0.6)) drop-shadow(0 0 20px rgba(255, 200, 0, 0.4)); }
  50% { filter: drop-shadow(0 10px 40px rgba(255, 150, 0, 0.9)) drop-shadow(0 0 30px rgba(255, 200, 0, 0.7)); }
}

/* Finale Ram.png Target */
.finale-ram-container {
  position: absolute;
  top: 15%;
  right: 10%;
  z-index: 50;
  transition: all 0.3s ease;
}

.finale-ram-container.hit {
  animation: finaleRamShake 8s ease-in-out infinite;
}

.finale-ram-image {
  width: 280px;
  height: auto;
  filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.5));
  transition: all 0.3s ease;
}

.finale-ram-container.hit .finale-ram-image {
  animation: finaleRamGlow 8s ease-in-out infinite;
}

@keyframes finaleRamShake {
  0%, 12%, 27%, 42%, 57%, 72%, 87%, 100% { transform: translate(0, 0) rotate(0deg); }
  15%, 30%, 45%, 60%, 75%, 90% { transform: translate(-8px, 5px) rotate(-3deg); }
  16%, 31%, 46%, 61%, 76%, 91% { transform: translate(8px, -5px) rotate(3deg); }
  17%, 32%, 47%, 62%, 77%, 92% { transform: translate(-4px, 3px) rotate(-1deg); }
  18%, 33%, 48%, 63%, 78%, 93% { transform: translate(0, 0) rotate(0deg); }
}

@keyframes finaleRamGlow {
  0%, 12%, 20%, 27%, 35%, 42%, 50%, 57%, 65%, 72%, 80%, 87%, 95%, 100% {
    filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.5));
  }
  15%, 30%, 45%, 60%, 75%, 90% {
    filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.5)) drop-shadow(0 0 40px rgba(255, 200, 0, 0.9));
  }
  16%, 31%, 46%, 61%, 76%, 91% {
    filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.5)) drop-shadow(0 0 60px rgba(255, 150, 0, 1));
  }
  17%, 32%, 47%, 62%, 77%, 92% {
    filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.5)) drop-shadow(0 0 25px rgba(255, 200, 0, 0.6));
  }
}

/* Finale Cannonball Animation */
.finale-cannonball-container {
  position: absolute;
  top: 50%;
  left: 230px;
  pointer-events: none;
}

.finale-cannonball {
  position: absolute;
  width: 35px;
  height: 35px;
  background: radial-gradient(circle at 30% 30%, #5a5a5a 0%, #2a2a2a 70%, #000 100%);
  border-radius: 50%;
  box-shadow: 
    inset -6px -6px 12px rgba(0, 0, 0, 0.9),
    inset 4px 4px 10px rgba(120, 120, 120, 0.5),
    0 0 25px rgba(255, 150, 0, 0.7),
    0 0 50px rgba(255, 100, 0, 0.4);
  animation: finaleShootCannonball 1.5s ease-out infinite;
  opacity: 0;
}

.finale-cannonball-trail {
  position: absolute;
  width: 80px;
  height: 10px;
  background: linear-gradient(90deg, transparent 0%, rgba(255, 200, 100, 0.9) 20%, rgba(255, 150, 50, 0.7) 50%, rgba(255, 100, 0, 0.4) 100%);
  border-radius: 5px;
  right: 30px;
  top: 50%;
  transform: translateY(-50%);
  filter: blur(3px);
}

@keyframes finaleShootCannonball {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 0;
  }
  5% {
    opacity: 1;
  }
  20% {
    transform: translate(250px, -120px) scale(0.95);
    opacity: 1;
  }
  40% {
    transform: translate(500px, -220px) scale(0.9);
    opacity: 1;
  }
  60% {
    transform: translate(750px, -300px) scale(0.85);
    opacity: 1;
  }
  80% {
    transform: translate(950px, -350px) scale(0.75);
    opacity: 0.9;
  }
  95% {
    transform: translate(1100px, -380px) scale(0.6);
    opacity: 0.7;
  }
  100% {
    transform: translate(1150px, -390px) scale(0.4);
    opacity: 0;
  }
}

/* Particles */
.particles-container {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  pointer-events: none;
}

.particle {
  position: absolute;
  top: 50%;
  background: radial-gradient(circle, #ffd700 0%, #ff8c00 100%);
  border-radius: 50%;
  animation: particleBurst 2s ease-out forwards;
  box-shadow: 
    0 0 10px #ffd700,
    0 0 20px rgba(255, 215, 0, 0.5);
}

@keyframes particleBurst {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }
  100% {
    transform: translate(
      calc(cos(var(--angle)) * 300px),
      calc(sin(var(--angle)) * 300px - 200px)
    ) scale(0);
    opacity: 0;
  }
}

/* Main Ramadan Text */
.ramadan-text-container {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  opacity: 0;
  z-index: 100;
}

.ramadan-text-container.visible {
  animation: textReveal 1.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes textReveal {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.3);
    filter: blur(20px);
  }
  50% {
    filter: blur(0);
  }
  100% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
    filter: blur(0);
  }
}

.ramadan-arabic {
  font-size: 180px;
  font-family: 'Traditional Arabic', 'Amiri', 'Scheherazade', serif;
  color: #ffd700;
  text-shadow: 
    0 0 20px rgba(255, 215, 0, 0.8),
    0 0 40px rgba(255, 215, 0, 0.6),
    0 0 60px rgba(255, 215, 0, 0.4),
    0 0 80px rgba(255, 200, 0, 0.3),
    2px 2px 0 #b8860b,
    4px 4px 0 #8b6914;
  animation: textGlow 2s ease-in-out infinite;
  letter-spacing: 10px;
  line-height: 1;
}

@keyframes textGlow {
  0%, 100% {
    text-shadow: 
      0 0 20px rgba(255, 215, 0, 0.8),
      0 0 40px rgba(255, 215, 0, 0.6),
      0 0 60px rgba(255, 215, 0, 0.4),
      0 0 80px rgba(255, 200, 0, 0.3),
      2px 2px 0 #b8860b,
      4px 4px 0 #8b6914;
  }
  50% {
    text-shadow: 
      0 0 30px rgba(255, 215, 0, 1),
      0 0 60px rgba(255, 215, 0, 0.8),
      0 0 90px rgba(255, 215, 0, 0.6),
      0 0 120px rgba(255, 200, 0, 0.4),
      2px 2px 0 #b8860b,
      4px 4px 0 #8b6914;
  }
}

.ramadan-subtitle {
  font-size: 100px;
  font-family: 'Traditional Arabic', 'Amiri', 'Scheherazade', serif;
  color: #ffffff;
  text-shadow: 
    0 0 15px rgba(255, 255, 255, 0.8),
    0 0 30px rgba(255, 255, 255, 0.5);
  margin-top: -20px;
  animation: subtitleFade 1s ease-out 0.5s both;
}

@keyframes subtitleFade {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.ramadan-english {
  font-size: 36px;
  font-family: 'Georgia', serif;
  color: rgba(255, 255, 255, 0.8);
  letter-spacing: 15px;
  text-transform: uppercase;
  margin-top: 30px;
  animation: englishFade 1s ease-out 1s both;
}

@keyframes englishFade {
  from { opacity: 0; letter-spacing: 30px; }
  to { opacity: 0.8; letter-spacing: 15px; }
}

.text-glow {
  position: absolute;
  width: 600px;
  height: 400px;
  background: radial-gradient(ellipse, rgba(255, 215, 0, 0.3) 0%, transparent 70%);
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: -1;
  animation: glowExpand 3s ease-out forwards;
}

@keyframes glowExpand {
  0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
  50% { opacity: 1; }
  100% { transform: translate(-50%, -50%) scale(1.5); opacity: 0.5; }
}

/* Decorative Borders */
.decorative-border {
  position: absolute;
  left: 0;
  width: 100%;
  height: 60px;
  background: 
    linear-gradient(90deg, 
      transparent 0%, 
      rgba(218, 165, 32, 0.3) 20%, 
      rgba(218, 165, 32, 0.5) 50%, 
      rgba(218, 165, 32, 0.3) 80%, 
      transparent 100%
    );
}

.decorative-border.top {
  top: 0;
  border-bottom: 2px solid rgba(218, 165, 32, 0.5);
}

.decorative-border.bottom {
  bottom: 0;
  border-top: 2px solid rgba(218, 165, 32, 0.5);
}

.decorative-border::before,
.decorative-border::after {
  content: 'âœ¦';
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  color: #ffd700;
  font-size: 24px;
  text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
}

.decorative-border::before { left: 20%; }
.decorative-border::after { right: 20%; }

/* Close Button */
.ending-close-btn {
  position: absolute;
  top: 20px;
  right: 20px;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.1);
  border: 2px solid rgba(255, 215, 0, 0.5);
  color: #ffd700;
  font-size: 24px;
  cursor: pointer;
  transition: all 0.3s ease;
  z-index: 1000;
}

.ending-close-btn:hover {
  background: rgba(255, 215, 0, 0.2);
  transform: scale(1.1);
  box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
}

/* Ending Message */
.ending-message {
  position: absolute;
  bottom: 80px;
  left: 50%;
  transform: translateX(-50%);
  text-align: center;
  opacity: 0;
  transition: opacity 1s ease-out;
}

.ending-message.visible {
  opacity: 1;
}

.ending-message p {
  font-size: 24px;
  color: rgba(255, 255, 255, 0.9);
  font-style: italic;
  letter-spacing: 2px;
  text-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
}

/* Responsive */
@media (max-width: 768px) {
  .ramadan-arabic {
    font-size: 80px;
  }
  
  .ramadan-subtitle {
    font-size: 50px;
  }
  
  .ramadan-english {
    font-size: 18px;
    letter-spacing: 8px;
  }
  
  .moon-shape {
    font-size: 80px;
  }
  
  .cannon-container {
    transform: scale(0.6);
    bottom: 10%;
    left: 5%;
  }
  
  .lantern {
    transform: scale(0.5);
  }
}
